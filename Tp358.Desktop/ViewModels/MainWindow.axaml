<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Tp358.Desktop.ViewModels"
        x:Class="Tp358.Desktop.Views.MainWindow"
        Width="900" Height="500"
        Title="TP358S Monitor">
  <Window.DataContext>
    <vm:MainViewModel/>
  </Window.DataContext>

  <DockPanel Margin="12">
    <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Spacing="8">
      <TextBlock VerticalAlignment="Center" Text="{Binding Status}"/>
      <Button Content="Connect" Command="{Binding ConnectCommand}"/>
      <Button Content="Disconnect" Command="{Binding DisconnectCommand}"/>
    </StackPanel>

    <DataGrid ItemsSource="{Binding Readings}" Margin="0,12,0,0" IsReadOnly="True" AutoGenerateColumns="False">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Time" Binding="{Binding Timestamp}"/>
        <DataGridTextColumn Header="MAC" Binding="{Binding DeviceMac}"/>
        <DataGridTextColumn Header="RSSI" Binding="{Binding Rssi}"/>
        <DataGridTextColumn Header="Temp (°C)" Binding="{Binding TemperatureC}"/>
        <DataGridTextColumn Header="RH (%)" Binding="{Binding HumidityPercent}"/>
        <DataGridTextColumn Header="Bat (%)" Binding="{Binding BatteryPercent}"/>
        <DataGridTextColumn Header="Raw" Binding="{Binding RawPayloadHex}"/>
      </DataGrid.Columns>
    </DataGrid>
  </DockPanel>
</Window>
