<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP358 Backend Monitor</title>
    <link rel="stylesheet" href="/monitor.css">
</head>
<body>
    <div class="container">
        <h1>üå°Ô∏è TP358 Backend Monitor</h1>

        <div class="status">
            <div class="status-left">
                <div class="status-indicator"></div>
                <span id="connectionStatus">Backend</span>
                <span id="bleAdapterStatus" class="status-adapter">BLE: n/a</span>
            </div>
            <div class="status-actions">
                <div class="status-actions-left">
                    <button id="homeViewButton" class="view-btn active" type="button">Home</button>
                    <button id="graphViewButton" class="view-btn" type="button">GRAPH</button>
                    <button id="flowViewButton" class="view-btn" type="button">Vor-R√ºcklauf</button>
                    <button id="monitorViewButton" class="view-btn" type="button">Monitor</button>
                </div>
                <div class="status-actions-right">
                    <button id="shutdownButton" class="shutdown-btn" type="button" disabled>
                        Backend Stop
                    </button>
                </div>
            </div>
        </div>

        <div id="homeView">
            <div id="sensorsContainer" class="sensors-grid"></div>

            <div id="noData" class="no-data" style="display: none;">
                Warte auf Sensordaten...
            </div>
        </div>

        <div id="graphView" class="graph-view" style="display: none;">
            <div id="graphControls" class="status-controls flow-controls graph-controls">
                <div class="control-group control-left">
                    <button class="view-btn time-btn" type="button" data-hours="12">12h</button>
                    <button class="view-btn time-btn active" type="button" data-hours="24">1 Tag</button>
                    <button class="view-btn time-btn" type="button" data-hours="48">2 Tage</button>
                    <button class="view-btn time-btn" type="button" data-hours="168">1 Woche</button>
                </div>
                <div class="control-group control-right">
                    <button class="view-btn smooth-btn active" type="button" data-smooth="A">A Median</button>
                    <button class="view-btn smooth-btn" type="button" data-smooth="B">B EMA</button>
                    <div class="smooth-window">
                        <button id="smoothMinus" class="view-btn smooth-adjust" type="button">-</button>
                        <span id="smoothMinutesLabel" class="smooth-label">2 min</span>
                        <button id="smoothPlus" class="view-btn smooth-adjust" type="button">+</button>
                    </div>
                </div>
            </div>
            <div id="graphContainer"></div>
            <div id="graphNoData" class="no-data" style="display: none;">
                Keine Messwerte in der Datenbank gefunden.
            </div>
        </div>

        <div id="flowView" class="graph-view" style="display: none;">
            <div id="flowControls" class="status-controls flow-controls">
                <div class="control-group control-left">
                    <button class="view-btn flow-time-btn" type="button" data-hours="12">12h</button>
                    <button class="view-btn flow-time-btn active" type="button" data-hours="24">1 Tag</button>
                    <button class="view-btn flow-time-btn" type="button" data-hours="48">2 Tage</button>
                    <button class="view-btn flow-time-btn" type="button" data-hours="168">1 Woche</button>
                </div>
                <div class="control-group control-right">
                    <div class="flow-energy-start">
                        <label class="control-label" for="flowEnergyStart">Start</label>
                        <input id="flowEnergyStart" class="flow-date" type="datetime-local">
                    </div>
                    <button class="view-btn flow-smooth-btn active" type="button" data-smooth="A">A Median</button>
                    <button class="view-btn flow-smooth-btn" type="button" data-smooth="B">B EMA</button>
                    <div class="smooth-window">
                        <button id="flowSmoothMinus" class="view-btn smooth-adjust" type="button">-</button>
                        <span id="flowSmoothMinutesLabel" class="smooth-label">2 min</span>
                        <button id="flowSmoothPlus" class="view-btn smooth-adjust" type="button">+</button>
                    </div>
                </div>
            </div>
            <div id="flowContainer"></div>
            <div id="flowNoData" class="no-data" style="display: none;">
                Keine Messwerte in der Datenbank gefunden.
            </div>
        </div>

        <div id="monitorView" class="graph-view" style="display: none;">
            <div id="monitorControls" class="status-controls flow-controls">
                <div class="control-group control-left">
                    <div class="smooth-window">
                        <button id="monitorMinutesMinus" class="view-btn smooth-adjust" type="button">-</button>
                        <span id="monitorMinutesLabel" class="smooth-label">20 min</span>
                        <button id="monitorMinutesPlus" class="view-btn smooth-adjust" type="button">+</button>
                    </div>
                    <button id="monitorSmoothToggle" class="view-btn" type="button">Gl√§ttung: Aus</button>
                </div>
            </div>
            <div id="monitorContainer"></div>
            <div id="monitorNoData" class="no-data" style="display: none;">
                Keine Messwerte in der Datenbank gefunden.
            </div>
        </div>
    </div>

    <script src="/monitor.config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@latest/dist/browser/signalr.min.js"></script>
    <script src="/monitor.js"></script>
    
</body>
</html>
